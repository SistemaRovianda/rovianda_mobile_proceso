<app-title-header
  titlePath="Regresar"
  path="/process/process-detail"
  (OnClickEvent)="onBackButton(form)"
>
</app-title-header>
<ion-content>
  <ion-grid class="container container--all">
    <ion-row>
      <ion-col>
        <h1 class="title">Embutido</h1>
      </ion-col>
    </ion-row>

    <ion-row>
      <ion-col size="3"
        ><ion-button
          *ngIf="isSelectedProcess"
          class="reprocessing-btn"
          (click)="reprocessing()"
          >reproceso</ion-button
        ></ion-col
      >
    </ion-row>
    <ion-row class="container container__row container__row--forms">
      <ion-col class="container container__column" size="12">
        <div class="container container__form">
          <app-form-sausage
            [products]="products$|async"
            [lotsMeat]="lotsMeat$|async"
            #form
          ></app-form-sausage>
        </div>
      </ion-col>
    </ion-row>

    <ion-row
      class="container container__row container__row--buttons ion-justify-content-around"
    >
      <ion-col class="container container__column" size="12">
        <ion-button
          *ngIf="!isSelected || !form.optionalFinal"
          [disabled]="!form.fieldsRequireds || loading || isSelected"
          class="container container_buttton"
          color="secondary"
          size="large"
          expand="block"
          (click)="form.onSubmit()"
          ><ion-grid>
            <ion-row *ngIf="!loading"> <ion-col>Guardar</ion-col></ion-row>
            <ion-spinner
              *ngIf="loading"
              name="crescent"
            ></ion-spinner> </ion-grid
        ></ion-button>
        <ion-button
          *ngIf="isSelected && form.optionalMedium"
          [disabled]="form.fieldsOptionalMedium || loading "
          class="container container_buttton"
          color="secondary"
          size="large"
          expand="block"
          (click)="form.onSubmitDate()"
          ><ion-grid>
            <ion-row *ngIf="!loading"> <ion-col>Guardar</ion-col></ion-row>
            <ion-spinner
              *ngIf="loading"
              name="crescent"
            ></ion-spinner> </ion-grid
        ></ion-button>
        <ion-button
          *ngIf="isSelected && form.optionalFinal && !form.optionalMedium"
          [disabled]="form.fieldsOptionalFinal || loading "
          class="container container_buttton"
          color="secondary"
          size="large"
          expand="block"
          (click)="form.onSubmitDate()"
          ><ion-grid>
            <ion-row *ngIf="!loading"> <ion-col>Guardar</ion-col></ion-row>
            <ion-spinner
              *ngIf="loading"
              name="crescent"
            ></ion-spinner> </ion-grid
        ></ion-button>
      </ion-col>
    </ion-row>
  </ion-grid>
</ion-content>
